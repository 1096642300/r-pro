(this["webpackJsonpreact-pro"]=this["webpackJsonpreact-pro"]||[]).push([[10],{1018:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return v}));a(391);var n=a(390),i=(a(556),a(1012)),o=(a(1016),a(1010)),l=(a(170),a(120)),r=(a(440),a(551)),c=a(42),s=a(43),u=a(124),d=a(45),f=a(44),m=(a(565),a(1013)),h=(a(169),a(73)),p=a(0),S=a.n(p),g=a(122),A=a(395),b=a.n(A),k=a(568),y=a.n(k),E=h.a.Group,O=m.a.Text,D={id:"id",title:"\u6807\u9898",amount:"\u9605\u8bfb\u91cf",author:"\u4f5c\u8005",currentAt:"\u521b\u5efa\u65f6\u95f4"},v=function(t){Object(d.a)(a,t);var e=Object(f.a)(a);function a(){var t;Object(c.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).state={dataSource:[],columns:[],total:0,loading:!1,limited:10,offset:0,isDeleteArticleModelShow:!1,deleteArticleTitle:"",deleteArticleLoding:!1,deleteArticleId:""},t.createColums=function(e){var a=e.map((function(t){return"amount"===t?{title:D[t],render:function(t,e,a){var n=e.amount;return S.a.createElement(l.a,{placement:n>230?"top":"bottom",title:n>230?"\u9ad8\u4e8e230":"\u4f4e\u4e8e230"},S.a.createElement(r.a,{color:n>230?"green":"red"},n))},key:t}:"currentAt"===t?{title:D[t],render:function(t,e,a){var n=e.currentAt;return b()(n).format("YYYY\u5e74MM\u6708DD\u65e5 HH:mm:ss")},key:t}:{title:D[t],dataIndex:t,key:t}}));return a.push({title:"\u64cd\u4f5c",key:"action",render:function(e,a){return S.a.createElement(E,null,S.a.createElement(h.a,{onClick:t.toEdit.bind(Object(u.a)(t),a),size:"small",type:"primary"},"\u7f16\u8f91"),S.a.createElement(h.a,{onClick:t.deleteArticle.bind(Object(u.a)(t),a),size:"small",type:"danger"},"\u5220\u9664"))}}),a},t.toEdit=function(e){t.props.history.push({pathname:"/admin/article/edit/".concat(e.id),state:{title:e.title}}),localStorage.setItem("title",JSON.stringify(e))},t.deleteArticle=function(e){t.setState({isDeleteArticleModelShow:!0,deleteArticleTitle:e.title,deleteArticleId:e.id})},t.onCancel=function(){t.setState({isDeleteArticleModelShow:!1})},t.onOk=function(){t.setState({deleteArticleLoding:!0}),Object(g.a)(t.state.deleteArticleId).then((function(e){t.setState({offset:0},(function(){t.getData()}))})).finally((function(){t.setState({deleteArticleLoding:!1,isDeleteArticleModelShow:!1})}))},t.getData=function(){t.setState({loading:!0}),Object(g.b)(t.state.offset,t.state.limited).then((function(e){var a=Object.keys(e.list[0]),n=t.createColums(a);t.setState({total:e.total,columns:n,dataSource:e.list})})).finally((function(){t.setState({loading:!1})}))},t.handleChange=function(e,a){t.setState({limited:a,offset:a*(e-1)},(function(){t.getData()}))},t.toExcel=function(){for(var e=[Object.keys(t.state.dataSource[0])],a=0;a<t.state.dataSource.length;a++)e.push([t.state.dataSource[a].id,t.state.dataSource[a].title,t.state.dataSource[a].author,t.state.dataSource[a].amount,b()(t.state.dataSource[a].currentAt).format("YYYY\u5e74MM\u6708DD\u65e5 HH:mm:ss")]);var n=y.a.utils.aoa_to_sheet(e),i=y.a.utils.book_new();y.a.utils.book_append_sheet(i,n,"SheetJS"),y.a.writeFile(i,"\u7528\u6237\u4fe1\u606f\u8868-".concat(t.state.offset/t.state.limited+1,"\u9875.xlsx"))},t}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){return S.a.createElement(n.a,{title:"\u6587\u7ae0\u5217\u8868",extra:S.a.createElement(h.a,{onClick:this.toExcel},"\u5bfc\u51faExcel\u8868")},S.a.createElement(o.a,{dataSource:this.state.dataSource,columns:this.state.columns,rowKey:function(t){return t.id},loading:this.state.loading,pagination:{current:this.state.offset/this.state.limited+1,position:["bottomRight"],total:this.state.total,hideOnSinglePage:!0,showQuickJumper:!0,pageSizeOptions:["10","15","20","25"],onChange:this.handleChange}}),S.a.createElement(i.a,{title:"\u8b66\u544a\uff01\u6b64\u64cd\u4f5c\u4e0d\u53ef\u9006",visible:this.state.isDeleteArticleModelShow,onCancel:this.onCancel,confirmLoading:this.state.deleteArticleLoding,onOk:this.onOk,cancelText:"\u70b9\u9519\u4e86\uff0c\u5728\u770b\u770b",okText:"\u62dc\u62dc~",centered:!0,maskClosable:!1},S.a.createElement(S.a.Fragment,null,"\u786e\u5b9a\u8981\u5220\u9664",S.a.createElement(O,{type:"danger",delete:!0},this.state.deleteArticleTitle),"\u6587\u7ae0\u5417\uff1f")))}}]),a}(p.Component)},443:function(t,e){},573:function(t,e){},574:function(t,e){}}]);
//# sourceMappingURL=10.30a03784.chunk.js.map